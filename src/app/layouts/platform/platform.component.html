<div class="platform">
    <div class="platform-sidebar">
        <img
            class="platform-sidebar--icon"
            src="/assets/logo/icon-transparent.png"
            alt="Kavka Logo" />

        <div class="platform-sidebar--tabs">
            <a routerLink="/p/u" routerLinkActive="platform-sidebar--tabs--active-tab" class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M23.707,22.293l-5.969-5.969a10.016,10.016,0,1,0-1.414,1.414l5.969,5.969a1,1,0,0,0,1.414-1.414ZM10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18Z" />
                </svg>
                <span>Chats</span>
            </a>

            <a
                routerLink="/p/settings"
                routerLinkActive="platform-sidebar--tabs--active-tab"
                class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z" />
                    <path
                        d="M21.294,13.9l-.444-.256a9.1,9.1,0,0,0,0-3.29l.444-.256a3,3,0,1,0-3-5.2l-.445.257A8.977,8.977,0,0,0,15,3.513V3A3,3,0,0,0,9,3v.513A8.977,8.977,0,0,0,6.152,5.159L5.705,4.9a3,3,0,0,0-3,5.2l.444.256a9.1,9.1,0,0,0,0,3.29l-.444.256a3,3,0,1,0,3,5.2l.445-.257A8.977,8.977,0,0,0,9,20.487V21a3,3,0,0,0,6,0v-.513a8.977,8.977,0,0,0,2.848-1.646l.447.258a3,3,0,0,0,3-5.2Zm-2.548-3.776a7.048,7.048,0,0,1,0,3.75,1,1,0,0,0,.464,1.133l1.084.626a1,1,0,0,1-1,1.733l-1.086-.628a1,1,0,0,0-1.215.165,6.984,6.984,0,0,1-3.243,1.875,1,1,0,0,0-.751.969V21a1,1,0,0,1-2,0V19.748a1,1,0,0,0-.751-.969A6.984,6.984,0,0,1,7.006,16.9a1,1,0,0,0-1.215-.165l-1.084.627a1,1,0,1,1-1-1.732l1.084-.626a1,1,0,0,0,.464-1.133,7.048,7.048,0,0,1,0-3.75A1,1,0,0,0,4.79,8.992L3.706,8.366a1,1,0,0,1,1-1.733l1.086.628A1,1,0,0,0,7.006,7.1a6.984,6.984,0,0,1,3.243-1.875A1,1,0,0,0,11,4.252V3a1,1,0,0,1,2,0V4.252a1,1,0,0,0,.751.969A6.984,6.984,0,0,1,16.994,7.1a1,1,0,0,0,1.215.165l1.084-.627a1,1,0,1,1,1,1.732l-1.084.626A1,1,0,0,0,18.746,10.125Z" />
                </svg>
                <span>Settings</span>
            </a>

            <a
                routerLink="/p/archive"
                routerLinkActive="platform-sidebar--tabs--active-tab"
                class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M17,0H7A5.006,5.006,0,0,0,2,5V19a5.006,5.006,0,0,0,5,5H17a5.006,5.006,0,0,0,5-5V5A5.006,5.006,0,0,0,17,0ZM7,2H17a3,3,0,0,1,3,3v6H4V5A3,3,0,0,1,7,2ZM17,22H7a3,3,0,0,1-3-3V13H20v6A3,3,0,0,1,17,22Z" />
                    <path d="M11,7h2a1,1,0,0,0,0-2H11a1,1,0,0,0,0,2Z" />
                    <path d="M13,17H11a1,1,0,0,0,0,2h2a1,1,0,0,0,0-2Z" />
                </svg>
                <span>Archive</span>
            </a>

            @if (!isPWAInstalled && installPWAEvent) {
                <a (click)="installPWA()" class="icon">
                    <svg class="w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="m19,1h-3c-.553,0-1,.448-1,1s.447,1,1,1h3c1.654,0,3,1.346,3,3v7H2v-6.978c0-.804.314-1.56.885-2.127.566-.563,1.317-.873,2.115-.873h.017l2.978.017h.006c.55,0,.997-.444,1-.995.003-.552-.442-1.002-.994-1.005l-2.978-.017h-.028c-1.331,0-2.582.516-3.525,1.455-.951.945-1.475,2.204-1.475,3.545v7.978c0,2.757,2.243,5,5,5h6v2h-4c-.553,0-1,.448-1,1s.447,1,1,1h10c.553,0,1-.448,1-1s-.447-1-1-1h-4v-2h6c2.757,0,5-2.243,5-5V6c0-2.757-2.243-5-5-5Zm0,16H5c-1.302,0-2.402-.839-2.816-2h19.631c-.414,1.161-1.514,2-2.816,2Zm-8-8.58V1c0-.552.447-1,1-1s1,.448,1,1v7.421l2.319-2.154c.403-.375,1.038-.354,1.413.053.376.405.353,1.037-.052,1.413l-2.613,2.426c-.561.561-1.308.843-2.058.843-.76,0-1.523-.289-2.104-.869l-2.587-2.4c-.404-.376-.428-1.008-.052-1.413.374-.406,1.009-.428,1.413-.053l2.319,2.153Z" />
                    </svg>
                    <span>Install</span>
                </a>
            }
        </div>

        <div class="platform-sidebar--footer flex justify-center">
            <div class="dropdown-container">
                <div class="dropdown">
                    <label class="cursor-pointer" tabindex="0">
                        <div class="flex items-center justify-center avatar bg-primary size-10">
                            {{ activeUser.name[0].toUpperCase() }}
                        </div>
                    </label>
                    <div class="mb-4 dropdown-menu-blur dropdown-menu dropdown-menu-top-right">
                        <a
                            routerLink="/auth/login"
                            tabindex="-1"
                            class="dropdown-item text-sm text-white flex flex-row items-center gap-2">
                            <svg
                                class="w-4 fill-white"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24">
                                <path
                                    d="m7.5 13a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-7a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0 -2.5-2.5zm7.5 14a5.006 5.006 0 0 0 -5-5h-5a5.006 5.006 0 0 0 -5 5v4h2v-4a3 3 0 0 1 3-3h5a3 3 0 0 1 3 3v4h2zm2.5-11a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-7a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0 -2.5-2.5zm6.5 14a5.006 5.006 0 0 0 -5-5h-4v2h4a3 3 0 0 1 3 3v4h2z" />
                            </svg>
                            Switch Account
                        </a>
                        <a
                            routerLink="/auth/logout"
                            tabindex="-1"
                            class="dropdown-item text-sm text-error flex flex-row items-center gap-2">
                            <svg
                                class="w-4 fill-error"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24">
                                <path
                                    d="m24,12c0,6.617-5.383,12-12,12-.552,0-1-.447-1-1s.448-1,1-1c5.514,0,10-4.486,10-10S17.514,2,12,2c-.552,0-1-.447-1-1s.448-1,1-1c6.617,0,12,5.383,12,12Zm-21.538,1.116c-.036-.036-.064-.078-.096-.116h13.633c.552,0,1-.447,1-1s-.448-1-1-1H2.367c.033-.04.061-.082.098-.119l5.134-5.177c.389-.392.386-1.025-.006-1.414-.392-.39-1.026-.387-1.414.006L1.047,9.47c-.675.677-1.047,1.575-1.047,2.53s.372,1.854,1.045,2.527l5.134,5.177c.195.197.453.296.71.296.254,0,.509-.097.704-.29.392-.389.395-1.022.006-1.414l-5.137-5.18Z" />
                            </svg>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="platform-viewbox">
        <router-outlet></router-outlet>
    </div>
</div>
